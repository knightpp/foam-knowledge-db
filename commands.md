# Search file in all packages

`pacman -F $filename`

### by regular expression

`pacman -Fx $expr`

### Alternative, search in installed packages

`pacman -Qo kvm-ok`

# Search and delete duplicated files

`rmlint -T df --config=sh:handler=remove ./`

### Same but `ln -s` files

`rmlint -T df --config=sh:handler=clone ./`

# Video editing

### Scale video

`ffmpeg -i inp.mp4 -c:v libx264 -b:v 500k -c:a aac -b:a 64k -filter:v scale=-1:720 opti.mp4`

### Cut video

`ffmpeg -i in.mp4 -c:v libx264 -b:v 250k -c:a aac -b:a 64k -filter:v scale=640:-1 -ss 00:07:26 -t 00:00:24 -async 1 out.mp4`

### Cut video alternative

`ffmpeg -ss 00:01:00 -i input.mp4 -to 00:02:00 -c copy output.mp4`

### ?

`ffmpeg -i input.mp4 -c:v libx264 -tune animation -preset veryslow -crf 30 output.mp4`

`ffmpeg -i in.mp4 -c:v libaom-av1 -crf 30 -b:v 0 -strict experimental av1.mkv`

### Add silent audio track

`ffmpeg -f lavfi -i anullsrc=channel_layout=stereo:sample_rate=44100 -i video.mov -c:v copy -c:a aac -shortest output.mov`

# Files

### Convert file/folder name to another encoding

`convmv -f CP1251 -t UTF-8 *`

### Perhaps best algorithm for compression of source files

`lrztar -z -p 7 '/folder/`

### Compress PDF

`convert -density 200x200 -quality 60 -compress jpeg input.pdf output.pdf`

### Optimize PDF

`ps2pdf -dPDFSETTINGS=/ebook input.pdf output.pdf`

### Convert WORD files

`pandoc -i in.docx -o out.odt`

### Convert file encoding

`iconv -f WINDOWS-1251 -t UTF-8 in.txt > out.txt`

### Compress folder or file using `tar` with ZSTD compression

`tar --zstd -cvf output.tar.zst /media/input-files`
| Arg    | Comment                      |
| ------ | ---------------------------- |
| --zstd | compr algo ZSTD              |
| -c     | create archive               |
| -v     | verbose (print current file) |
| -f     |                              |

### Tar unpack(extract) with ZSTD compression

`tar --zstd -xvf input.tar.zst --directory output-dir`

## Developer

### Automatically get linker flags

`gcc my-program.c $(pkg-config --cflags --libs x11) -o my-program`

### Compile DOS assembler

`gcc -std=gnu99 -O0 -nostdlib -m32 -march=i386 -ffreestanding -fno-pie -o dos_print.com -Wl,--nmagic,--script=com.ld dos_print.c`

# Terminal

### Open script in new terminal window

`gnome-terminal -x bash -c 'cmd1 ; cmd2'`

# System

### List journal errors

`sudo journalctl -p <priority> -r`

> Where <priority> textual or numeric log level,
> "emerg" (0), "alert" (1), "crit" (2), "err" (3),
> "warning" (4), "notice" (5), "info" (6), "debug" (7)
>
> `-r` sort newest first

# Funny

### Play a song generated by random numbers

`cat /dev/urandom | hexdump -v -e '/1 "%u\n"' | awk '{ split("4,5,7,11",a,","); for (i = 0; i < 1; i+= 0.0001) printf("%08X\n", 100*sin(1046*exp((a[$1 % 8]/12)*log(2))*i)) }' | xxd -r -p | aplay -c 2 -f S32_LE -r 24000`

# Software replacements 
### ls
(exa)[https://github.com/ogham/exa]
### cat
(bat)[https://github.com/sharkdp/bat]
### Find
(fd)[https://github.com/sharkdp/fd]
### ps
(procs)[https://github.com/dalance/procs]
### sed
(sd)[https://github.com/chmln/sd]
### du
(dust)[https://github.com/bootandy/dust]
### grep
(ripgrep)[https://github.com/BurntSushi/ripgrep]
#### There is also (hyperfine)[https://github.com/sharkdp/hyperfine] for benchmarking commands


# Rust specific

### Add target-cpu=native feature
```
export RUSTFLAGS="-C target-cpu=native"
cargo build --release --locked
```